
import 'package:chamber_of_commerce/main.dart';
import 'package:chamber_of_commerce/pages/user/Business.dart';
import 'package:chamber_of_commerce/pages/user/Business_Options/Agriculture/Agriculture_Home.dart';
import 'package:chamber_of_commerce/pages/user/Business_Options/Export/Export_Home.dart';
import 'package:chamber_of_commerce/pages/user/Business_Options/Manufacturing/Manufacturing_Home.dart';
import 'package:chamber_of_commerce/pages/user/Company%20_business.dart';
import 'package:chamber_of_commerce/pages/user/Company.dart';
import 'package:chamber_of_commerce/pages/user/Company_detail.dart';
import 'package:chamber_of_commerce/pages/user/Home.dart';
import 'package:chamber_of_commerce/widgets/BottomNavBar.dart';
import 'package:chamber_of_commerce/widgets/CustomBottomNavBar.dart';
import 'package:chamber_of_commerce/widgets/GridScreen.dart';
import 'package:chamber_of_commerce/widgets/GridSingle.dart';
import 'package:chamber_of_commerce/widgets/SearchField.dart';
import 'package:chamber_of_commerce/widgets/SearchFieldBusiness.dart';
import 'package:chamber_of_commerce/widgets/business_top_list.dart';
import 'package:firebase_core/firebase_core.dart';
import 'package:firebase_database/firebase_database.dart';
import 'package:flutter/cupertino.dart';
import 'package:flutter/material.dart';
import 'package:flutter/widgets.dart';
import 'package:flutter_svg/svg.dart';
import 'package:share_plus/share_plus.dart';
import 'package:url_launcher/url_launcher.dart';


class Manufacturing_listing extends StatefulWidget {
  final int index;
  final String title;
  final List<Map<String, String>> businessCompanyProfile ;
  const Manufacturing_listing({super.key,required this.index,required this.title,required this.businessCompanyProfile});
  @override
  State<Manufacturing_listing> createState() => _Agriculture_listingState();
}

class _Agriculture_listingState extends State<Manufacturing_listing> {
   Stream<DatabaseEvent>? _userStream;
  // final Map data = widget.businessCompanyProfile[""];
   
  @override
  void initState() {
    super.initState();
    try {
    _userStream = FirebaseDatabase.instance.ref('Query10').onValue;
  } on FirebaseException catch (e) {
    print('Firebase error: ${e.code} - ${e.message}');
    // Handle the error appropriately, potentially display a user-friendly message
  }
  }

  @override
  void dispose() {
    // _searchController.dispose();
    super.dispose();
  }

  // void _searchCompany(String searchTerm) {
  //   setState(() {
  //     // _searchTerm = searchTerm.toLowerCase();
  //   });
  // }
  @override
  Widget build(BuildContext context) {
    //sample data containing company name, log(if there is no logo give a default one
    // ),
  //  
    //  final data
    
     final  _items = [
     'assets/images/business_lists/sample/1.svg',
     'assets/images/business_lists/sample/2.svg',
     'assets/images/business_lists/sample/3.svg',
     'assets/images/business_lists/sample/4.svg',
     'assets/images/business_lists/sample/5.svg',
     'assets/images/business_lists/sample/6.svg',
    //  'assets/images/business_lists/sample/mengesha.svg',
    //  'assets/images/business_lists/sample/tomoca.svg',


   

  ];
     var scaffold = Scaffold(
      //  drawer:const BackButton(
      //   //  backgroundColor: Colors.white,
      //  ),
      
       





      appBar: AppBar(
        // Padding: const EdgeInsets.only(left: 20.0, top: 15.0, right: 10.0, bottom: 5.0),
        backgroundColor:Color.fromARGB(255, 255, 255, 255),
      
         leading: Row(
           children: [
             Column(
               children: [
                 IconButton(
                  icon: Icon(Icons.arrow_back),
                  onPressed:()=>{
                   Navigator.push(
                      context,
                       TransparentRoute(
               
                page:  Manufacturing_Home(),
              ),
                    ),
                    }
                  ),
          //           Padding(
          //   padding: const EdgeInsets.only(left: 20.0,right: 20,top: 4,bottom: 4),
          //   child: Container(
          //     height: MediaQuery.of(context).size.height*0.2,
          //     child: SearchField()),
          // ),
               ],
             ),
            
           ],
         ),
        // padding: const EdgeInsets.all(16.0), // Add padding on all sides
    shape: RoundedRectangleBorder(
      borderRadius: BorderRadius.circular(30.0), // Set border radius
    ),
       
        title: Text(
          widget.title,
          style: const TextStyle(
           color: Colors.black,
           fontWeight: FontWeight.bold,
           fontSize: 18,
          ),
        ),
       //should be replace by botton
       actions: [
          Padding(padding: EdgeInsets.only(right: 20),
         child:  SvgPicture.asset('assets/images/chamber_icon.svg')
          ,),
         
    ],
        elevation: 0.0,//remove shadow
        centerTitle: true,
        
      ),
      
      body:  
      // ListView(
    // children: [
    ListView(
        children: [
          
       
              StreamBuilder<DatabaseEvent>(builder:  (context, snapshot) {
                       return Column(
                         children: [
                  //          const SizedBox(
                  // height: 400,
                  // child: Business_Top_List()),
                          // const Padding(
                          //   padding: EdgeInsets.only(left: 20.0,right: 20, bottom: 10),
                          //   child: SearchFieldBusiness(),
                          // ),
                           
                         
                           
                           
                           
                                                            Container(
                                                                                                         // Set desired height or adjust with constraints
                                                                                                           height: MediaQuery.of(context).size.height * 0.81, // Adjust height as needed
                                                                                                         // color: Color.fromARGB(255, 142, 139, 139), // Optional background color
                                                                                                         child: _buildContent(snapshot), // Call a separate function
                                                                                                       ),
                         ],
                       );
                    }, stream: _userStream,)


        ],
      ),
          bottomNavigationBar:const CustomeButtomNavBar(index: 2,),


     
    );
    return scaffold;
  }

  ///
  ///
  ///
  
    Widget _buildContent(AsyncSnapshot<DatabaseEvent> snapshot) {
    //  print(snapshot.data!.snapshot.value as List<dynamic>);
      if (snapshot.hasError) {
    return Center(
      child: Text('Error: ${snapshot.error}'),
    );
  }

  if (snapshot.connectionState == ConnectionState.waiting) {
    return const Center(child: CircularProgressIndicator());
  }
  //  print(snapshot.data);
  final all_data = snapshot.data!.snapshot.value as List<dynamic>;
  final data = all_data.expand((element) {
    // ... filtering logic using entry.value as Map<String, dynamic>
    final companyName = element['Sector']?.toString() ?? '';
    return companyName.startsWith("MANUFACTURING") ? [element] : [];
  }).toList();
  // print(data);
  List<dynamic> filteredBusinesses = data;
  if (data.isEmpty) {
    return const Center(child: Text('No businesses found'));
  }
  //based on the index categorize SIT+A1:I15802C Description
  var items = [
 "NON-METALLIC MINERAL PRODUCTS" ,
"FOAM AND SPONGE" ,
"CEMENT, LIME AND PLASTER" ,
"SPECIAL PURPOSE MACHINERY" ,
"BLANKETS, MADE-UP FURNISHING ARTICLES AND STUFFED" ,
"PLASTIC PRODUCTS" ,
"TEXTILES AND GARMENT" ,
"BASIC IRON AND STEEL" ,
"DRESSING AND DYEING" ,
"FLOUR AND GRAIN MILL PRODUCTS, INCLUDING RICE AND VEGETABLE MILLING; GRAIN MILL RESIDUES" ,
"FOOT WEAR" ,
"PAINTS, VARNISHES AND SIMILAR COATINGS, PRINTING INK AND MASTICS" ,
"METAL STRUCTURES FROM ALUMINUM" ,
"MANUFACTURING OF MOTORCYCLES" ,
"SPICES,CONDIMENTS,VBINGAR,YEAST,EGG PRODUCE SOUPS AND OTHER FOOD PRODUCT." ,
"PRINTING" ,
// "Sub-Sector" ,
"OFFICE AND HOUSEHOLD FURNITURE" ,
"SPINNING, WEAVING AND FINISHING OF YARNS AND FABRICS PREDOMINANTLY OF WOOL AND ANIMAL FIBERS" ,
"ARTICLES OF CONCRETE, CEMENT AND PLASTER" ,
"COMPOUND COKING FATS, MARGARINE AND EDIBLE OILS" ,
"GROWING OF ANIMALS FEED" ,
"BAKERY PRODUCTS" ,
"SOAP AND OTHER CLEANING COMPOUNDS" ,
"GARMENT AND RELATED" ,
"SPORTS GOODS AND ENTERTAINMENT REQUISITES" ,
"CASTING OF IRON AND STEEL" ,
"AIRCRAFT AND SPACECRAFT" ,
"COMPUTER AND COMPUTER ACCESSORIES AND PERIPHERAL EQUIPMENT" ,
"GENERAL PURPOSE MACHINERY" ,
"BAGS, SACKS, RAPPING & PACKING MATERIALS" ,
"CLEANING, COSMOTICS AND INPUTS" ,
"SANITARY NAPKIN(PAD )AND DIAPER" ,
"MANUFACTURE OF SPRING MATTRESS" ,
"PRINTING MATERIALS" ,
"TELEVISION AND RADIO RECEIVERS, SOUND OR VIDEO RECORDING OR REPRODUCING APPARATUS AND ASSOCIATED GOODS" ,
"PRINTING OF BOOKS, BROCHURES, MUSICAL BOOKS AND OTHERS" ,
"OFFICE & HOUSE HOLD EQUIPMENTS" ,
"VENEER SHEETS; PLYWOOD, LAMINBOARD, PARTICLE BOARD AND OTHER PANELS AND BOARDS" ,
"ALCOHOLIC DRINKS" ,
"DISTILLING, RECTIFYING AND BLENDING OF SPIRITS; ETHYL ALCOHOL PRODUCTION FROM FERMENTED MATERIALS;MANUFACTURING OF WINE" ,
"PROCESSING AND PRESERVING OF FRUIT AND VEGETABLES" ,
"PULP, PAPER AND PAPERBOARD AND OF CONTAINERS MADE FROM PAPER PRODUCT" ,
"SOFT DRINK,BOTTLED WATERS/MINERAL WATERS" ,
"LEATHER ARTICLES" ,
"PAPER AND PAPER PRODUCTS AND STATIONERY" ,
"CANNED PRESERVED PROCESSED AND DEHYDRATED FRUIT AND VEGETABLES INCIUDING FRUIT JUICES JUICE EXTRACTS AND POTATO FLOUR MEAL" ,
"SPINNING OF TEXTILE FIBERS AND WEAVING OF TEXTILES" ,
"BUILDERS CARPENTRY AND JOINERY" ,
"REFRACTORY CERAMIC PRODUCTS" ,
"PASTA, MACARONI, NOODLES, COUSCOUS AND SIMILAR FARINACEOUS PRODUCTS" ,
"MANUFACTURE OF ELECTRICAL MACHINERY, APPARATUS UTILITIES" ,
"MAN MADE FIBER" ,
"MANUFACTURE OF TYRES AND PLASTIC PRODUCTS" ,
"MEDICAL AND SURGICAL EQUIPMENT AND ORTHOPEDIC APPLIANCES" ,
"STRUCTURAL METAL PRODUCTS" ,
"CANDLES AND MATCH" ,
"GLASS AND GLASSES PRODUCTS" ,
"BASIC CHEMICALS, EXCEPT FERTILIZERS AND NITROGEN COMPOUNDS" ,
"VEGETABLES AND ANIMAL OIL FAT" ,
"PREPARATION OF CONFECTIONERY, INCLUDING COCOA AND CHOCOLATE" ,
"LEATHER AND HIDE TANNING AND FINISHING" ,
"manufacture of knitted and crocheted fabrics and articles" ,
"MADE-UP TEXTILE ARTICLES, EXCEPT APPAREL" ,
"textile and textile articles,textile ascceris" ,
"STONE PRODUCTS" ,
"SPINNING, WEAVING AND FINISHING OF TEXTILES" ,
"PERFUMES, COSMETICS ,ESSENTIAL OILS AND RESINOUS" ,
"MEASURING SCALES" ,
"COSMETICS ,ESSENTIAL OILS AND RESINOUS ,PERFUME AND CHEMICALS FOR PERFUMES" ,
"COFFEE, COFFEE SUBSTITUTES AND TEA" ,
"INSULATED WIRE AND CABLE" ,
"STRUCTURAL METAL PRODUCTS, TANKS, RESERVOIRS AND STEAM GENERATORS" ,
"FABRICATED METAL PRODUCTS" ,
"TREATMENT AND COATING OF METALS; GENERAL MECHANICAL ENGINEERING ON A FEE OR CONTRACT BASIS" ,
"PRODUCTS OF WOOD(EXCEPT FURNITURE)" ,
"DAIRY PRODUCTS" ,
"PREPARED ANIMAL FEEDS" ,
"BEER" ,
"PACKAGING MATERIALS" ,
"PHOTOGRAPHIC AND OPTICAL INSTRUMENTS" ,
"WEARING AND APPRAL, EXCEPT FUR APPAREL" ,
"POLISHES,WAXES ,DRESSINGS AND INCENSE" ,
"PHARMACETUCALS,MEDICINALCHEMICALS AND BOTANICAL PRODUCTS FOR HUMAN USE" ,
"WINE" ,
"ANIMAL FEED" ,
"PLASTICS IN PRIMARY FORM AND OF SYNTHETIC RUBBER" ,
"FORGING,PRESSING STAMPING AND ROLL-FORMING OF METAL;POWDER METALLURGY" ,
"FOOD PRODUCTS" ,
"AGRICULTURAL AND FORESTRY MACHINERY" ,
"MACHINERY FOR MINING, QUARRYING AND CONSTRUCTION" ,
"BUTTONS, BUCKLES, SLIDE FASTENERS" ,
"TYRES AND TUBES" ,
"TOILET TISSUE AND NAPKIN PAPER" ,
"BODIES (COACHWORK) FOR MOTOR VEHICLES; TRAILERS AND SEMI-TRAILERS/MOTOR VEHICLES" ,
"REPRODUCTION OF RECORDED MEDIA" ,
"FOOD STUFF" ,
"MAN-MADE FIBRES" ,
"COFFEE AND TEA" ,
"IRON, STEEL AND METALIC MINERALS" ,
"MANUFACTURING OF FURNITURE" ,
"LEATHER AND LEATHER SUBSTITUTES WEARINGS" ,
"MANUFACTURE OF COMMUNICATION MACHINERIES,SPARE PARTS AND APPARATUS AND UTILITIES" ,
"PAGERS, HAND PHONES AND TELECOMMUNICATIONS APPARATUS (EGPALMTOPS, SMART WATCHES, WEARABLE COMPUTER AND ELECTRONIC BOOKS)" ,
"FOOD AND ANIMAL FEED PROCESSING MACHINERY" ,
"BROAD CAST EQUIPMENTS TELEVISION AND RADIO RECEIVERS, SOUND OR VIDEO RECORDING OR REPRODUCING APPARATUS AND ASSOCIATED GOODS" ,
"SPINNING, WEAVING AND FINISHING OF TRADITIONAL CLOTHES" ,
"ELECTRIC MOTORS,GENERATORS AND TRANSFORMERS" ,
"PRINTING AND RELATED ACTIVITIES" ,
"CRUDE OIL AND OILSEED CAKE AND MEAL" ,
"METAL STRUCTURES FROM STEEL" ,
"COMPUTER NETWORK DESIGN AND CABLE INSTALATION" ,
"Software Instalation,ommissioning,Monitoring and Erection Activity" ,
"CONFECTIONERY INCLUDING COCOA AND CHOCOLATE" ,
"CORKS & CANS" ,
"ELECTRIC LAMPS AND LIGHTING EQUIPMENT" ,
"ELECTRICITY DISTRIBUTION AND CONTROL APPARATUS" ,
"ELECTRICAL EQUIPMENT" ,
"PROCESSING OF MEAT BY PRODUCTS INCLUDING HIDES, BONES, ETC" ,
"OFFICE, ACCOUNTING AND COMPUTING MACHINERY" ,
"MOTOR VEHICLE PARTS AND ACCESSORIES" ,
"RUBBER PRODUCTS" ,
"TOBACCO PRODUCTS" ,
"MANUFACTURE OF TRANSPORT VEHICLES PARTS,SPARE PARTS AND TYRE" ,
"MANUFACTURING OF RAILWAY AND TRAMWAY LOCOMOTIVES AND ROLLING STOCK VEHICLES" ,
"MOTOR VECHICLES" ,
"SUGAR, INCLUDING GOLDEN SYRUP AND CASTOR SUGAR" ,
"PVC GRANULE FOR SOLE & PLASTIC SHOE" ,
"SECURITY CAMERA" ,
"SHEET & PLATE GLASS, GLASS BLOCKS, TUBES & RODS; GLASS FIBERS & GLASS WOOL" ,
"SLAUGHTERING, DRESSING AND PACKING OF LIVESTOCK, INCLUDING POULTRY AND SMALL GAME FOR MEAT" ,
"STRUCTURAL NON-REFRACTORY CLAY AND CERAMIC PRODUCTS" ,
"SPECIAL PURPOSE MACHINERY (FOR TEXTILE)" ,
"EDIBLE SALT" ,
"FERTILIZERS AND NITROGEN COMPOUNDS" ,
"TRADITIONAL FOODS" ,
"PROCESSING OF FRESH MILK (PASTEURISING, HOMOGENISING, STERILISING AND VITAMINISING)" ,
"MATERIALS AND PAINTING INKS USED FOR PROMOTION AND ADVERTISING" ,
"OTHER VEHICLE PARTS AND ACCESSORIES" ,
"PESTICIDES AND AGRO-CHEMICAL PRODUCTS" ,
"ADHESIVES, AND GLUES" ,
"CARPETS,RUGS AND MATS" ,
"PHARMACEUTICALS, MEDICAL CHEMICALS AND BOTANICAL PRODUCTS FOR HUMAN USE" ,
"LUBRICANTS & GREASE" ,
"EDIBLE OIL" ,
"CORDAGE,ROPE,TWINE AND NETTING" ,
"GASES" ,
"GRINDING/MANUFACTURING OF GRAINS" ,
"HOUSEHOLD APPLIANCE" ,
"CUTTING, SHAPING AND FINISHING OF STONE" ,
"MANUFACTURE OF WOOD AND WOOD PRODUCTS" ,
"SOFTWARE DEVELOPMENT ( INCLUDING DESIGN, ENRICHMENT AND IMPLEMENTATION)" ,
"HONEY AND HONEY PRODUCTS" ,
"MANUFACTUR OF CONSUMER ELECTRONIC EQUIPMENT (TV,DVD,RADIO AND SIMILAR EQUIPMENT)" ,
"TRANSPORT EQUIPMENT" ,
"CUTLERY, HAND TOOLS AND GENERAL HARDWARE" ,
"Manfacture of printer ink" ,
"FAST FOODS" ,
"RECYCLING OF NON-METAL WASTE AND SCRAP" ,
"MANUFACTURING OF GALVANIZED STEEL SHEETS" ,
"HOUSEHOLD AND OFFICE FURNITURE, REQUZITE, BOARDS, APPLIANCES" ,
"RECREATIONAL EQUIPMENTS" ,
"MADE-UP TEXTILE ARTICLES CORDAGE, ROPE, TWINE AND NETTING, BAGS, SACKS, RAPPING & PACKING MATERIALS" ,
"KINITTED AND CROCHETED FABRICS AND ARTICLES" ,
"OTHER PETROLEUM/SYNTHESISED PRODUCTS" ,
"SOUVENIRS,ARTIFACT AND ARTIFICIAL JEWELRY/ TRADITIONAL WEAR" ,
"CONSTRUCTION MATERIALS" ,
"HOUSEHOLD GOODS" ,
"TENTS, TARPAULINS, SAILS AND CANVAS GOODS" ,
"SHOES/CARS/PRINTING INK" ,
"ELECTROMECHANICAL WORK" ,
"BASIC CHEMICALS" ,
"STRUCTURAL CLAY AND CONCRETE PRODUCTS" ,
"TANKS, RESERVOIRS, SAFE BOXES AND SIMILAR CONTAINERS OF METAL" ,
"MINERALS AND MINERAL PRODUCTS" ,
"INSTALLATION, AND FIXING OF ALUMINUM WINDOWS AND DOORS/ ALUMINUM WORKS" ,
"PROCESSING AND CASTING MINERALS" ,
"AGRICULTURAL PRODUCTS" ,
"HOUSEHOLD ELECTRICAL APPLIANCES AND EQUIPMENT" ,
"COTTON, TEXTILE FIBERS,YARN, TEXTILES AND TEXTILES CLOTHING" ,
"INSTALLATION OF ELECTRIC LINE" ,
"DISTRIBUTION AND SALES OF ELECTRICITY" ,
"ELECTRICITY,GAS,STEAM AND HOT WATER SUPPLY" ,
"GENERATION OF ELECTRIC ENERGY FROM RENEWABLE SOURCES" ,
"BUILDING WORKS CONTRACTOR" ,
"GENERAL CONTRACTOR" ,
"WATER WORKS CONTRACTOR" ,
"CONSTRUCTION OF WATER WORKS" ,
"SPRAYING OF PESTICIDES FOR HOUSHOLD PURPOSES" ,
"GRAIN MILL SERVICE" ,
"DIFFERENT EVENTS DECORATING ACTIVITIES" ,
"CLINICS AND RELATED HEALTH CARE SERVICES" ,
"CONSULTANCY SERVICE FOR ECONOMIC DEVELOPMENT" ,
"SHORT TERM TCHNICAL EDUCATION AND TRAINING" ,
"DECORATING ACTIVITIES" ,
"LADIES HAIR DRESSING SERVICE" ,
"MIDDLE CLINIC SERVICE" ,
"BEAUTY TREATMENT/BATH AND MASSAGE" ,
"MOTION PICTURE, THEATRE AND VIDEO PRODUCTION AND DISTRIBUTION" ,
"FILM PRODUCTION" ,
"SERVICE OF REGULAR HIGHER EDUCATION" ,
"SPORTING AND RECREATIONAL ACTIVITIES" ,
"CONSULTANCY ACTIVITY ON ADVERTISING" ,
"NEWSPAPERS, JOURNALS AND PERIODICALS DISTRIBUTER" ,
"MANAGEMENT CONSULTANCY SERVICES" ,
"QUALITY MANAGEMENT SYSTEM CONSULTANCY" ,
"SERVICE OF PRE-PRIMARY EDUCATION AND AFTER SCHOOL" ,
"MEDIA PROGRAM PREPARATION BY AIR TIME RENT" ,
"EDUCATION BY TECHNICAL COLLEGES AND TECHNICAL INSTITUTIONS" ,
"CHILD DAY CARE SERVICE" ,
"EDUCATION RELATED SERVICES" ,
"TAILORING" ,
"LAUNDRY SERVICE" ,
"BOOKS AND STATIONARY MATERIALS" ,
"FILM PRODUCTION, CINEMA HAL, FILM STUDIO AND FILM CAPTURING" ,
"EDUCATION BY TECHNIQUES AND TRANING" ,
"MENS AND LADIES HAIRDRESSING" ,
"RESTAURANTS" ,
"PICTURE, SCULPTURE,GALLERY/ STUDIO SERVICE" ,
"DRIVING EDUCATION" ,
"TRANSLATION & SECRETARIAL SERVICES" ,
"INTERNET CAFÉ" ,
"WASHING AND DRY-CLEANING OF TEXTILES AND FUR PRODUCTS" ,
"SANITARYWARE AND COSMOTICS" ,
"RETAIL TRADE OF FOOT WEAR, LEATHER AND RELATED PRODUCTS" ,
"Men's hairdressing service" ,
"ARTS FESTIVAL( MUSIC,FILM, THEATRE,GALLERY AND OTHER)" ,
"MEDIA ENTERTAINMENT PRODUCTION AND DISTRIBUTION" ,
"MUSIC AND BAND ACTIVITIES" ,
"CUSTOMS CLEARANCE" ,
"SERVICE OF PRIMARY AND SECONDARY EDUCATION" ,
"DIAGNOSTIC LABORATORY" ,
"TOPOGRAPHIC BEAUTY" ,
"STUDIO RECORDING SERVICE" ,
"GENERAL HOSPITAL" ,
"COMMISSION/BROKERS BUSINESS ACTIVITIES" ,
"SECURITY AND CLEANING SERVICE" ,
"POULTRY" ,
"FLOURICULTURE" ,
"FLORICULTURE" ,
"GROWING OF HERBS AND OTHERS" ,
"AGRICULTURAL SUPPORT SERVICE" ,
"CATTLE AND PACK ANIMALS HUSBANDARY" ,
"TEA AND BEVERAGE ,SPICE CROPS, MEDICINAL AND AROMATIC CROPS FARMING" ,
"COTTON FARMING" ,
"GROWING OF CROPS COMBINED WITH FARMING OF ANIMALS (MIXED FARMING)" ,
"CEREALS/PULSES FARMING" ,
"DIFFERENT SEEDLINGS FARMING" ,
"OIL SEEDS FARMING" ,
"PEST CONTROL" ,
"FRUITS FARMING" ,
"VEGETABLE,FRUIT,PLANT AND PLANT SEED PRODUCTION" ,
"GROWING OF CEREALS" ,
"BEE KEEPING" ,
"FISH HATCHERIES AND FISH FARMS" ,
"Farming of cattle, sheep, goats, horses, asses, mules and hinnies; dairy farming" ,
"COFFEE FARMING" ,
"WOOL, HIDES, SKINS AND FEATHERS" ,
"STONE CARVINGS,CLAY SAND AND SIMILAR MINING AND QUARRYING" ,
"CONSULTANCY SERVICE ON CHEMICAL ENGINEERING" ,
"DIMENSION STONE (GRANITE, MARBLE, SLATE, AND WONDER STONE)" ,
"EXPLORATION" ,
"MINING SUPPORTIVE ACTIVITIES" ,
"RENTING SERVICE OF MACHINERIES AND EQUIPMENTS" ,
"REFINING OF PRECIOUS METALS" ,
"QUARRYING OF MINERALS" ,
"INSTALLATION AND MAINTENANCE OF MACHINERIES" ,
"COMPUTER AND COMPUTER ACCESSORIES MAINTENANCE" ,
"MULTI PURPOSE VEHICLES AND PARTS MAINTENANCE" ,
"FRUITS & VEGETABLES" ,
"LEATHER, LEATHER PRODUCTS, FOOTWEAR AND RELATED PRODUCTS" ,
"METAL AND NON METAL SCRAPS" ,
"RUBBER, PLASTICS AND PLASTIC PRODUCTSAND BATTERIES" ,
"STATIONARY MATERIALS, PAPER AND PAPER PRODUCTS" ,
"IMPORTING OF VEHICLES" ,
"IMPORTING OF VEHICLES SPARE PARTS,REGULATORY EQUIPMENTS AND JEWELRY/DECOR SUPPLIES" ,
"ELECTRICAL EQUIPMENTS AND APPLIANCES" ,
"NEW MOTOR VEHICLES" ,
"COMMUNICATION, COMPUTER AND RELATED EQUIPMENT" ,
"BASIC CHEMICALS, EXCEPT FERTILIZERS" ,
"CHEMICALS AND CHEMICAL PRODUCTS" ,
"DYEING, TANNING AND COLORING MATERIALS" ,
"PETROCHEMICAL/VASELINE, GRYCYLINE ETC/ PRODUCTS" ,
"PLASTICS IN PRIMARY FORMS AND NON-PRIMARY FORMS" ,
"INDUSTRIAL MACHINERY , EQUIPMENT AND ITS SPARE PARTS" ,
"USED MOTOR VEHICLES" ,
"APPAREL AND CLOTHING" ,
"LEATHER PRODUCTS" ,
"HUMAN HEALTH MEDICAL SUPPLIES AND EQUIPMENTS" ,
"VEHICLES BODIES AND TRAILERS" ,
"CEMENTS" ,
"CONSTRUCTION MATERIALS, HARDWARE, PLUMBING" ,
"GENERAL HARDWARE" ,
"PAINTS (INCLUDING VARNISHES,ADEHASIVE,GLUES AND SUPPLIES)" ,
"IMPORT TRADE IN CHEMICALS FOR AGRICULTURAL INPUT" ,
"BASIC INDUSTRIAL CHEMICALS" ,
"METAL ,NON METALS, METAL ORES AND SCRAPS" ,
"LOGS AND TIMBER" ,
"CRUDE RUBBER" ,
];
 items.sort((a,b)=>a.compareTo(b));
// print(items);
// for (var i = 0; i < items.length; i++) {
  var currentItem =  items[widget.index];
  // console.log(`
  // if(widget.index == i){
    // index = ${i};
    // print(data);
    filteredBusinesses = filteredBusinesses.expand((element) {
      // ... filtering logic using entry.value as Map<String, dynamic>
      final company = element['Sub-Sector']?.toString() ?? '';
      return company.startsWith("${currentItem}") ? [element] : [];
    }).toList();
//   print(i);
//   }

// }


 
  
 

  return filteredBusinesses.isEmpty
    ? const Padding(
        padding: EdgeInsets.all(8.0),
        child: Center(
          child: Text("No Business Found"),
        ) ,
      )
    :  
    
    
      // physics: NeverScrollableScrollPhysics(),
     
     
       ListView.builder(
       itemCount: filteredBusinesses.length,
       itemBuilder: (context, index) {
         final businessData = filteredBusinesses[index];
         final name = businessData['Account Name'];
         final email = businessData['Email'];
         final tel = businessData['Tel'];
         final mobile = businessData["Mobile"];
         final website = businessData["Website"];
         final sector = businessData["Sector"];
         final subSector = businessData["Sub-Sector"];
       
         // Extract business information based on your data structure
         return Padding(
           padding: const EdgeInsets.only(left: 20.0,right: 20,bottom: 16),
           child:
               GestureDetector(
                onTap: () {
          Navigator.push(
            context,
            MaterialPageRoute(
              builder: (context) => CompanyDetail(data: businessData),
            ),
          );
        },
                 child: Container(
                  
                    decoration: BoxDecoration(
                     
                         color: const Color.fromARGB(255,229,234,232),
                 
                 borderRadius:BorderRadius.circular(20), // Set border width
                 
                   ),
                   // color: const Color.fromARGB(255,229,234,232),
                   //  width: MediaQuery.of(context).size.width * 0.8,
                   //  height: 230,
                   child:  Padding(padding: EdgeInsets.all(16),
                   child: Column(children: [
                     Row(
                       children: [
                         Expanded(child: Text(name,style: const TextStyle(fontWeight: FontWeight.bold,fontSize: 16), softWrap: true,overflow: TextOverflow.ellipsis,textAlign: TextAlign.left)),
                       ],
                     ),
                     // Text(name, style: const TextStyle(fontWeight: FontWeight.bold,fontSize: 16),softWrap: true,overflow: TextOverflow.ellipsis,textAlign: TextAlign.center,),
                     //  Row(
                       
                       // children: [
                         // SvgPicture.asset('assets/images/phone_icon.svg'),
                         // SizedBox(width: 10,),
                        
                         // Column(children: [
                         //   SvgPicture.asset('assets/images/phone_icon.svg'),
                         //   SizedBox(height: 10,),
                         // //  SvgPicture.asset('assets/images/fax_icon.svg')
                            
                         // ],),
                         // SizedBox(width: 20,),
                         // Column(
                         //   children: [
                          
                         // SvgPicture.asset('assets/images/web_icon.svg'),
                         // SizedBox(height: 10,),
                         //  SvgPicture.asset('assets/images/mail_icon.svg'),
                         //   ]
                  
                         // )
                        
                         
                     //   ],
                     // ),
                     if(tel !="")
                     Row(
                       children: [
                         InkWell( // Wrap the content in an InkWell
                 onTap: () {
                   launch('tel:$tel'); // Launch the phone dialer with the number
                 },
                        child: Row(
                           children: [
                              Container(
                               // width: 20,
                               // height: 20,
                               decoration: BoxDecoration(
                     
                         color: Color.fromARGB(255, 255, 255, 255),
                 
                 borderRadius:BorderRadius.circular(999), // Set border width
                 
                   ),
                               child: SvgPicture.asset('assets/images/vector1.svg',width: 10,height: 10,)),
                             SizedBox(width: 10,),
                             Text(tel,softWrap: true,overflow: TextOverflow.ellipsis,),
                           ],
                         ),),
                       ],
                     ),
                     SizedBox(height: 5,),
                    
                      if(website !="")
                     Row(
                     children: [
                      InkWell( // Wrap the content in an InkWell
                         onTap: () {
                           launch(website); // Launch the URL in a web browser
                 },
                       child:Row(
                       children: [
                          Container(
                           // width: 20,
                           // height: 20,
                           decoration: BoxDecoration(
                     
                         color: Color.fromARGB(255, 255, 255, 255),
                 
                 borderRadius:BorderRadius.circular(999), // Set border width
                 
                   ),
                           child: SvgPicture.asset('assets/images/vector.svg',width: 10,height: 10,)),
                         SizedBox(width: 10,),
                         Text(website,softWrap: true,overflow: TextOverflow.ellipsis,),
                       ],
                     )),],),
                      SizedBox(height: 5,),
                      if(mobile !="")
                     Row(
                       children: [
                          Container(
                           // width: 10,
                           // height: 10,
                           decoration: BoxDecoration(
                     
                         color: Color.fromARGB(255, 255, 255, 255),
                 
                 borderRadius:BorderRadius.circular(999), // Set border width
                 
                   ),
                           child: SvgPicture.asset('assets/images/vector3.svg',width: 10,height: 10,)),
                         SizedBox(width: 10,),
                         Text(mobile,softWrap: true,overflow: TextOverflow.ellipsis,),
                       ],
                     ),
                      SizedBox(height: 5,),
                       if(email !="")
                     Row(
                   children: [
                     InkWell( // Wrap the content in an InkWell
                 onTap: () {
                   launch('mailto:$email'); // Launch email app with recipient
                 },
                 child: Row(
                       children: [
                          Container(
                           // width: 20,
                           // height: 20,
                           decoration: BoxDecoration(
                     
                         color: Color.fromARGB(255, 255, 255, 255),
                 
                 borderRadius:BorderRadius.circular(999), // Set border width
                 
                   ),
                           child: SvgPicture.asset('assets/images/vector2.svg',width: 10,height: 10,)),
                          SizedBox(width: 10,),
                         Text(email,softWrap: true,overflow: TextOverflow.ellipsis,),
                       ],
                     ),)]),
                      SizedBox(height: 5,),
                     Text('Sector: $sector',softWrap: true,overflow: TextOverflow.ellipsis,maxLines: 2,),
                     SizedBox(height: 5,),
                      Text('Sub Sector: $subSector',softWrap: true,overflow: TextOverflow.ellipsis,maxLines: 2,),
                     SizedBox(height: 20,),
                 
                 
                     
                //       Row(
                //         children: [
                //          SizedBox(width: MediaQuery.of(context).size.width*0.68,),
                //           Container(
                //             decoration: BoxDecoration(
                         
                //          color: Color.fromARGB(255, 255, 255, 255),
                 
                //  borderRadius:BorderRadius.circular(999), // Set border width
                 
                //    ),
                //             child: IconButton(
                //              icon: const Icon(Icons.share),
                //              onPressed: () async {
                //                // Replace with your actual sharing logic
                //                final text = 'Company Name: $name\n Phone: $tel\n Email: $email\n Website: $website\n Fax: $mobile\n';
                //                await Share.share(text);
                //              },
                //                       ),
                //           ),
                //         ],
                //       ),
                     // const Column(
                     //   children: [
                         
                     //   ],
                     // )
                   ],))
                    
                 ),
               ),
            
         
         );
         //  ListView(
           // children: [
             // Text(name);
           //   Text(tel),
           //   Text(mobile),
           //   Text(website),
           //  Text(email),
           // ]
             
           // onTap: () {
             // Navigate to CompanyDetailsScreen
             // Navigator.push(
             //   context,
             //   MaterialPageRoute(
             //     builder: (context) => Detail(businessData: businessData),
             //   ),
             // );
           // },
         // );
       },
         );
  
}
}































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































 

















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































